# Lambda Rim
## Because 99% ainâ€™t a free throw


**Lead Developer | Feb 2025 â€“ Present** 
A full-stack, AI-powered platform that automatically analyzes NBA â€œOver/Underâ€ picks on Fantasy sports such as PrizePicks. From OCRâ€™ing screenshots to running Poisson, Monte Carlo & GARCH volatility forecasts (including playoff games), and generating natural-language bet explanations via ChatGPT, this site manages the entire pipeline end-to-endâ€”hosted on Firebase Hosting + Cloud Run with CI/CD.


---


## ğŸš€ Project Overview


- **Objective:** Predict NBA player point performances (â€œOverâ€ picks) using statistical models (Poisson, Monte Carlo, GARCH volatility) and AI-driven explanations. 
- **Live Outcome:** Turned \$10 into \$3,279+ on PrizePicks (29,900% ROI) with an 11/14 lineup win rate. 
- **Core Features:** 
 - **Screenshot Parsing (OCR):** Upload PrizePicks cards, extract player & threshold pairs. 
 - **Player Pipeline:** 
   - Season & last-5 game averages 
   - Poisson probability 
   - Monte Carlo simulation 
   - GARCH volatility forecast (regular season & playoffs) 
   - Injury report scraping 
   - ChatGPT-powered bet explanation 
 - **Playoff Support:** Automatically switches to playoff stats after â‰¥ 5 postseason games. 
 - **Real-Time Updates:** Background Cloud Functions mark â€œConcludedâ€ games and settle bets. 
 - **CI/CD & Hosting:** React + Vite on Firebase Hosting, Flask + Docker on Cloud Run, GitHub Actions auto-deploy.


---


## ğŸ“¸ Pre Flight Website Access


[Website Link](https://prizepicksproject-15337.web.app/)


- **Currently, the project is still in development as more features will be integrated along with bug fixes**
 - If you would like access to the website despite it's early development phase, please feel free to reach out to bryanram2024@gmail.com


---


## ğŸ“¸ Demo Video


[Watch on GitHub](https://github.com/user-attachments/assets/ec796b28-824e-4374-8d9a-beedc7a0ed4e)


---


## ğŸ–¼ï¸ Screenshots


### Home Page 
![](https://github.com/user-attachments/assets/39f4e1e9-add3-415b-95ca-03cb9c5b3129) 
Greeted by Earnings, Active Bets & Live Picks.


### Player Analysis Panel 
![](https://github.com/user-attachments/assets/8d960312-30c7-47f6-9004-ed82facc348b) 
Input a player + threshold â†’ see probability forecasts & AI explanation.


### Processed Players Dashboard 
![](https://github.com/user-attachments/assets/3f9c727b-b315-4688-bd57-0a12a55820dc) 
Aggregated player cards across all users.


---


## ğŸ§° Tech Stack


### Front-End 
- **React + Vite** â€“ SPA framework 
- **Tailwind CSS** â€“ Utility-first styling 
- **Lucide React** â€“ Icon library 
- **Recharts** â€“ Charts & graphs 


### Back-End 
- **Python 3.9+** 
- **OCaml** - Monte Carlo
- **Flask** â€“ REST API 
- **gunicorn** â€“ WSGI server (Cloud Run) 
- **firebase-admin** â€“ Firestore & Auth 
- **openai** â€“ ChatGPT o4-mini integration


### ğŸ“ˆ Data & Analytics 
- **Poisson & Monte Carlo** â€“ Probability pipelines 
- **GARCH (arch-model)** â€“ Volatility forecasting 
- **pandas, NumPy** â€“ Data wrangling 
- **NBA API** â€“ Stats & box scores 
- **OCR (screenshot_parser.py)** â€“ Image data extraction 
- **Requests** â€“ Web scraping (NBA Injury Report) 
- **!!Coming Soon!!** - ML Algorithm trained off of data stored in Firestore


### Infrastructure & Deployment 
- **Firebase Hosting** â€“ Front-end CDN & SSL 
- **Cloud Run** â€“ Containerized Flask API 
- **Firebase Cloud Functions** â€“ Background jobs & data migration 
- **GitHub Actions** â€“ CI/CD (build â†’ deploy Hosting & Cloud Run) 
- **Docker** â€“ Back-end container 




---




## ğŸ“Š Probability &â€¯Forecasting Methods


Below is a quick reference on how each analytical value is produced inside the player documents.


### ğŸ”¢ Poisson Probability (`poissonProbability`)
- **Data window:** *All* regularâ€‘season games from the current season 
- **Library:** Native Python `math` (no external deps) 
- **Computation:** 
 - Calculate the season scoring average `Î»` 
 - Evaluate $$P(X \ge t) \;=\; 1 - \sum_{k=0}^{\lceil t\rceil-1} \frac{e^{-\lambda}\lambda^{k}}{k!}$$ 
   where **`t`** is the userâ€‘selected points threshold 
- **Interpretation:** Purely distributionâ€‘based likelihood a player scores **over** the line given their seasonâ€‘long mean


---


### ğŸ² Monteâ€¯Carlo Probability (`monteCarloProbability`)
- **Data window:** Up to **60** mostâ€‘recent games (regular *and* playoff) 
- **Stats used:** sample mean `Î¼` & standard deviation `Ïƒ` 
- **Simulations:** **100â€¯000** random seasons per query 
- **Engine priority:** 
 1. **OCaml** routine exposed through a C shared library (`mc_stub.c`) for speed 
 2. Fallback to NumPyâ€™s `np.random.normal()` if the native lib isnâ€™t available 
- **Output:** Fraction of simulations where the random score â‰¥ user threshold 
- **Why Monteâ€¯Carlo?** Captures hot/cold streaks and nonâ€‘Gaussian tails better than a single closedâ€‘form model


---


### ğŸ“ˆ GARCH Volatility Forecast (`volatilityForecast`, `volatilityPlayOffsForecast`)
- **Data window:** **Lastâ€¯50** games (or all playoff games once â‰¥â€¯5 exist) 
- **Library:** [`arch`](https://github.com/bashtage/arch) â€“ fits a **GARCH(1,1)** model 
- **Pipeline:** 
 1. Convert the points series to â€œreturnsâ€ via first differences 
 2. Fit GARCH(1,1) on those returns 
 3. Return the 1â€‘stepâ€‘ahead forecasted **Ïƒ** (squareâ€‘root of the predicted variance) 
- **Interpretation:** Forwardâ€‘looking volatility that reflects clustering of highâ€‘variance performances


---


Together, these three metrics give a balanced outlook:


| Metric | Scope | Strength |
| ------ | ----- | -------- |
| **Poisson** | Seasonâ€‘long | Fast analytical baseline |
| **Monteâ€¯Carlo** | Last â‰¤â€¯60 games | Empirical tailâ€‘risk capture |
| **GARCH Ïƒ** | Lastâ€¯50 games | Shortâ€‘run variance / streak detection |


---


### Project Scheme
PRIZEPICKS_PREDICTIONWEBSITE/
â”œâ”€â”€ backEnd/
â”‚   â”œâ”€â”€ app.py
â”‚   â”œâ”€â”€ chatgpt_bet_explainer.py
â”‚   â”œâ”€â”€ injury_report.py
â”‚   â”œâ”€â”€ monte_carlo.py
â”‚   â”œâ”€â”€ player_analyzer.py
â”‚   â”œâ”€â”€ prediction_analyzer.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ screenshot_parser.py
â”‚   â”œâ”€â”€ volatility.py
â”‚   â”œâ”€â”€ admin_endpoints.py
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ frontEnd/
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”‚   â””â”€â”€ mobile-viewport.html
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ActiveBet.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AdvancedMetricsCard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ApiTest.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AppLayout.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ BetConfirmation.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ BetExplanationCard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ BetSlip.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ chatgpt-thinking.css
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatGptThinking.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DailyPicks.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ EditBetModal.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ FavoritePlayers.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ImageWithFallback.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ InjuryStatusCard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MobileLayout.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MobileOptimizedDashboard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MobilePlayerCard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MonteCarloCard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Notifications.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PlayerAnalysisDashboard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PlayerAnalysisModal.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PlayerAnalysisSearch.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PlayerCard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PlayerStatsModal.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PredictionCard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PreviousBets.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ processed-players.css
â”‚   â”‚   â”‚   â”œâ”€â”€ ProcessedPlayers.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RecommendationCard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ScreenshotUploader.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ StatsCard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TermsOfServiceModal.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ thinking-animation.css
â”‚   â”‚   â”‚   â”œâ”€â”€ ThinkingAnimation.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TrendingPicks.jsx
â”‚   â”‚   â”‚   â””â”€â”€ admin/
â”‚   â”‚   â”‚       â”œâ”€â”€ SystemOverview.jsx
â”‚   â”‚   â”‚       â”œâ”€â”€ UserAnalytics.jsx
â”‚   â”‚   â”‚       â”œâ”€â”€ BetPerformance.jsx
â”‚   â”‚   â”‚       â”œâ”€â”€ PlayerAnalytics.jsx
â”‚   â”‚   â”‚       â”œâ”€â”€ FinancialMetrics.jsx
â”‚   â”‚   â”‚       â””â”€â”€ SystemMonitoring.jsx
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ SignIn.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DashboardPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ProcessedPlayersPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PreviousBetsPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AlertsPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SignIn.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminLogin.jsx
â”‚   â”‚   â”‚   â””â”€â”€ AdminLayout.jsx
â”‚   â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”‚   â”œâ”€â”€ initDatabase.js
â”‚   â”‚   â”‚   â”œâ”€â”€ migrateData.js
â”‚   â”‚   â”‚   â”œâ”€â”€ mobile-viewport.js
â”‚   â”‚   â”‚   â””â”€â”€ use-mobile-detector.js
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ api.js
â”‚   â”‚   â”‚   â””â”€â”€ firebaseService.js
â”‚   â”‚   â”œâ”€â”€ App.css
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â”œâ”€â”€ firebase.js
â”‚   â”‚   â”œâ”€â”€ index.css
â”‚   â”‚   â””â”€â”€ main.jsx
â”œâ”€â”€ injury_report_fn/
â”‚   â”œâ”€â”€ full_injury_report.py
â”‚   â””â”€â”€ main.py
â”œâ”€â”€ .firebaserc
â”œâ”€â”€ .github/workflows
â”‚   â””â”€â”€ firebase-hosting-merge.yml
â”œâ”€â”€ firebase.json
â””â”€â”€ README.md


### Firestore Database Scheme
firestore/
â”œâ”€ processedPlayers/ (collection)
â”‚   â”œâ”€â”€ active/ (document)
â”‚   â”‚   â””â”€â”€ {first_last_threshold_YYYYMMDD} (e.g. aaron_gordon_11.5_20250511)
â”‚   â”‚       â”œâ”€ name: string (e.g. Aaron Wiggins)
â”‚   â”‚       â”œâ”€ playerId: string (e.g. 1630598)
â”‚   â”‚       â”œâ”€ team: string (e.g. Oklahoma City Thunder)
â”‚   â”‚       â”œâ”€ position: string (e.g. G)
â”‚   â”‚       â”œâ”€ opponent: string (e.g. Minnesota Timberwolves)
â”‚   â”‚       â”œâ”€ photoUrl: string (url)
â”‚   â”‚       â”œâ”€ teamLogo: string (url)
â”‚   â”‚       â”œâ”€ opponentLogo: string (url)
â”‚   â”‚       â”œâ”€ gameDate: Timestamp
â”‚   â”‚       â”œâ”€ gameTime: string
â”‚   â”‚       â”œâ”€ gameType: string
â”‚   â”‚       â”œâ”€ teamPlayoffRank: number
â”‚   â”‚       â”œâ”€ opponentPlayoffRank: number
â”‚   â”‚       â”œâ”€ seasonAvgPoints: number
â”‚   â”‚       â”œâ”€ last5RegularGamesAvg: number
â”‚   â”‚       â”œâ”€ seasonAvgVsOpponent: number
â”‚   â”‚       â”œâ”€ homeAwayAvg: number
â”‚   â”‚       â”œâ”€ last5RegularGames: array<map> 
â”‚   â”‚       â”‚    â””â”€ [{ date, points, opponent, opponentFullName, â€¦ }, â€¦]
â”‚   â”‚       â”œâ”€ advancedPerformance: map
â”‚   â”‚       â”œâ”€ careerSeasonStats: array<map>
â”‚   â”‚       â”œâ”€ injuryReport: map
â”‚   â”‚       â”œâ”€ betExplanation: map
â”‚   â”‚       â”œâ”€ poissonProbability: number
â”‚   â”‚       â”œâ”€ monteCarloProbability: number
â”‚   â”‚       â”œâ”€ volatilityForecast: number
â”‚   â”‚       â”œâ”€ season_games_agst_opp: array<map>
â”‚   â”‚       â”œâ”€ num_playoff_games: number
â”‚   â”‚       â”œâ”€ playoffAvg: number
â”‚   â”‚       â”œâ”€ volatilityPlayOffsForecast: number
â”‚   â”‚       â”œâ”€ points: number
â”‚   â”‚       â”œâ”€ minutes: number
â”‚   â”‚       â”œâ”€ num_season_games: number
â”‚   â”‚       â”œâ”€ playoff_underCount: number
â”‚   â”‚       â”œâ”€ average_mins: number
â”‚   â”‚       â””â”€ playoff_games: array<map> 
â”‚   â”‚            â”œâ”€ date: string
â”‚   â”‚            â”œâ”€ points: number
â”‚   â”‚            â”œâ”€ opponent, string
â”‚   â”‚            â””â”€ gameType: string
â”‚   â”œâ”€â”€ concluded/ (document)
â”‚   â”‚       â””â”€â”€ {first_last_threshold_YYYYMMDD}/ 
â”‚   â”‚            â”‚ ( same fields as active/ )
â”‚   â”‚            â”œâ”€ bet_result: string
â”‚   â”‚            â”œâ”€ finishedAt: timestamp
â”‚   â”‚            â”œâ”€ betStatus: string
â”‚   â”‚            â”œâ”€ finalPoints: number
â”‚   â”‚            â””â”€ finalMinutes: number
â”‚   â””â”€â”€ injury_report/ (document)
â”‚           â””â”€â”€ {team_name (e.g. indiana_pacers)}/ (document)
â”‚               â”œâ”€ lastUpdated: timestamp
â”‚               â”œâ”€ players: array<map>
â”‚               â”‚   â”œâ”€ gameDate: string
â”‚               â”‚   â”œâ”€ gameTime: string
â”‚               â”‚   â””â”€ reason: string
â”‚               â””â”€ team: string
â”œâ”€ users/{userId}/ (collection)
â”‚   â”œâ”€ activeBets/{YYYYMMDDTHHMMSSZ} (e.g. 20250528T221321Z)
â”‚   â”‚   â”œâ”€ betAmount: number
â”‚   â”‚   â”œâ”€ betPayOut: number
â”‚   â”‚   â”œâ”€ bettingPlatform: string
â”‚   â”‚   â”œâ”€ betType: string
â”‚   â”‚   â”œâ”€ createdAt: timestamp
â”‚   â”‚   â””â”€ picks: array<map>
â”‚   â”‚       â””â”€ {processedPlayers/players/active/first_last_threshold_YYYYMMDD} (doc ref)
â”‚   â”œâ”€ betHistory/{YYYYMMDDTHHMMSSZ} (e.g. 20250528T221321Z)
â”‚   â”‚   â”‚  ( same fields as activeBets/, except the document references in the picks array<map> are changed to: processedPlayers/players/concluded/{first_last_threshold_YYYYMMDD} (doc ref) )
â”‚   â”‚   â”œâ”€ betResult: string
â”‚   â”‚   â”œâ”€ settledAt: timestamp
â”‚   â”‚   â”œâ”€ status: string
â”‚   â”‚   â””â”€ winnings: number
â”‚   â””â”€ profileData
â”‚       â”œâ”€ createdAt: timestamp
â”‚       â”œâ”€ displayName: string
â”‚       â”œâ”€ lastLogin: timestamp
â”‚       â”œâ”€ lossCount: number
â”‚       â”œâ”€ password: string
â”‚       â”œâ”€ pfp: string
â”‚       â”œâ”€ totalBets: number
â”‚       â”œâ”€ totalEarnings: number
â”‚       â”œâ”€ username: string
â”‚       â”œâ”€ tosAccepted: timestamp
â”‚       â””â”€ winCount: number
â””â”€ admin/
    â”œâ”€â”€ profile/ 
    â”‚   â”œâ”€ username: string
    â”‚   â””â”€ password: string
    â”œâ”€â”€ analytics/
    â”‚   â”œâ”€â”€ daily_stats/
    â”‚   â”œâ”€â”€ user_metrics/
    â”‚   â””â”€â”€ system_health/
    â”œâ”€â”€ monitoring/
    â”‚   â”œâ”€â”€ api_performance/
    â”‚   â””â”€â”€ error_logs/
    â””â”€â”€ reports/
        â”œâ”€â”€ bet_performance/
        â””â”€â”€ player_analytics/






# LAMBDA RIM - TERMS OF SERVICE


**Last Updated:** 05/30/2025
## 1. Acceptance of Terms
By accessing or using this service ("Service"), you agree to be bound by these Terms. If you do not agree, immediately discontinue use.


## 2. Nature of Service
a) The Service provides statistical predictions and AI-generated analysis for informational purposes ONLY  
b) All outputs are computer-generated probabilities, NOT gambling advice or financial recommendations  
c) We do NOT guarantee accuracy, completeness, or profitability of predictions  


## 3. User Acknowledgements
You expressly agree that:
a) You are of legal gambling age in your jurisdiction (18+ or 21+ where applicable)  
b) You understand sports betting involves significant risk of financial loss  
c) You will NOT treat our predictions as guaranteed outcomes  
d) You solely assume all liability for betting decisions made using this Service  


## 4. Legal Compliance
a) Users are solely responsible for complying with local gambling laws  
b) The Service does not constitute an offer to gamble  
c) We prohibit use in jurisdictions where sports betting is illegal  


## 5. Disclaimers
**THE SERVICE IS PROVIDED "AS IS" WITHOUT WARRANTIES OF ANY KIND. WE EXPRESSLY DISCLAIM:**
a) Warranties of accuracy, reliability, or fitness for any purpose  
b) Responsibility for gambling losses or damages  
c) Endorsement of any third-party gambling platforms  


## 6. Limitation of Liability
Under no circumstances shall Lambda Rim be liable for:
a) Direct/indirect gambling losses  
b) Decisions made based on Service outputs  
c) Technical errors or data inaccuracies  


## 7. Data Usage
By using the Service, you consent to:
a) Collection of betting patterns and usage data for model improvement  
b) Secure storage of personal data per our Privacy Policy  
c) Anonymized aggregation of prediction outcomes  


## 8. Account Termination
We reserve the right to suspend accounts:
a) Suspected of fraudulent activity  
b) Violating these Terms  
c) From prohibited jurisdictions  


## 9. Amendments
We may update these Terms at any time. Continued use constitutes acceptance.


---


**BY USING THIS SERVICE, YOU CERTIFY THAT:**
1. You have read and understood these Terms  
2. You acknowledge sports betting involves risk of financial loss  
3. You assume full responsibility for your gambling decisions 





migration-flow.mermaid:

graph TD
    A[Cloud Scheduler<br>Every 5 min] -->|POST /check_games| B[Cloud Run Service<br>app.py]
    B --> C[check_active_players]
    C --> D[fetch_game_status]
    D --> E{Game Concluded?}
    E -- Yes --> F[update_doc + move_player_to_concluded]
    F --> G[update_bet_pick_references]
    G --> H[check_user_picks]
    H --> I[check_active_bets]
    I --> J[Set bet status]
    
    K[Cloud Scheduler<br>Hourly] -->|Pub/Sub| L[update_injury_report]
    L --> M[Scrape NBA Injury Reports]
    M --> N[Update Firestore]


First-Time Access Flow

sequenceDiagram
    User->>App: Signs in
    App->>Firebase: Check userDoc.tosAccepted
    alt First access
        App->>User: Show full-screen ToS modal
        User->>App: Clicks "I Accept"
        App->>Firebase: Update userDoc: { tosAccepted: timestamp }
        App->>User: Grants betting access
    else Already accepted
        App->>User: Direct access
    end




Commands on Bash Terminal


bryanramirez-gonzalez@mac functions % firebase functions:list       

Function
	Version
	Trigger
	Location
	Memory
	Runtime
	update_injury_report
	v2
	google.cloud.pubsub.topic.v1.messagePublished
	us-west2
	244.140625
	python311
	



bryanramirez-gonzalez@mac functions % gcloud scheduler jobs list --location us-west2 --project prizepicksproject-15337
ID                    LOCATION  SCHEDULE (TZ)                      TARGET_TYPE  STATE
check-games-job       us-west2  */5 * * * * (America/Los_Angeles)  HTTP         ENABLED
injury-report-hourly  us-west2  0 * * * * (America/Los_Angeles)    Pub/Sub      ENABLED




bryanramirez-gonzalez@mac functions % gcloud scheduler jobs describe check-games-job \
  --location us-west2 --project prizepicksproject-15337 \
  --format="value(httpTarget.uri)"
https://prizepicks-backend-788584934715.us-west2.run.app/check_games




bryanramirez-gonzalez@mac prizePicks_predictionWebsite % gcloud run services list --region us-west2 --project prizepicksproject-15337
   SERVICE               REGION    URL                                                         LAST DEPLOYED BY                                              LAST DEPLOYED AT
âœ”  prizepicks-backend    us-west2  https://prizepicks-backend-788584934715.us-west2.run.app    bryanram2024@gmail.com                                        2025-05-30T08:24:04.584911Z
âœ”  update-injury-report  us-west2  https://update-injury-report-788584934715.us-west2.run.app  service-788584934715@gcf-admin-robot.iam.gserviceaccount.com  2025-05-20T14:55:47.616265Z

Commands to deploy Functions:

# Deploy Functions only
firebase deploy --only functions


# Deploy Backend only  
gcloud run deploy prizepicks-backend \
  --source backEnd \
  --region us-west2 \
  --platform managed


# Deploy everything
git push origin main  # Triggers full CI/CD

# Deployment command for the injury report function remains:
firebase deploy --only functions:update_injury_report





More information on every File:

backEnd/


File
	Purpose in one glance
	Key responsibilities / notes
	app.py
	Central Flask APIâ€¯gatewayâ€¯+â€¯admin analytics hub
	â€¢ Sets up the Flask app, configures CORS (allowing localhost, your Firebase domains, and the new admin dashboard domain), and initializes Firebase Admin (Firestore client) using the service-account credentials.
â€¢ Health check endpoint (GET "/") returns JSON { "status": "API is running", "timestamp": ... } for liveness probes.
â€¢ User-facing endpoints (unchanged):
â€“ POST /api/parse_screenshot â€“ OCRs one or more images using screenshot_parser, mapping each to { player, threshold }, then internally POSTs to /api/player. Returns a flat list of parsed names/thresholds.
â€“ POST /api/player â€“ Checks Firestore under processedPlayers/players/active/{pickId}; if cached, returns that document. Otherwise runs the full pipeline:
â€¢ Fetches season + last 5 stats via player_analyzer.py
â€¢ Retrieves injury status (now using the updated injury_report.get_player_status() PDF lookup)
â€¢ Calculates Poisson & Monte Carlo probabilities
â€¢ Runs GARCH volatility forecasts (regular & playoffs if â‰¥ 5 PO games)
â€¢ Calls ChatGPT to generate a natural-language â€œWhy this bet?â€ explanation
â€¢ Persists the combined result (with a computed pick_id) back to Firestore before returning to the client.
â€“ GET /api/player/<pickId>/more_games â€“ Lazy-loads remaining regular-season games for infinite-scroll tables, using the new player_analyzer.fetch_additional_games() helper (which handles pagination & error states).
â€¢ Admin analytics suite (enhanced):
â€“ GET /api/admin/overview â€“ Live counts for total users, active bets, processed players, total user winnings, and a real API requests counter (no longer a placeholder).
â€“ GET /api/admin/users â€“ Aggregates per-user engagement stats from Firestore: earnings, win_rate, last_login, total_bets, and favorite_players_count.
â€“ GET /api/admin/bets â€“ Returns bet volume, win / loss distribution, ROI, and a 30-day performance trend, computed directly from the users/{userId}/betHistory collections.
â€“ GET /api/admin/players â€“ Builds league-wide hit rate tables and â€œmost-analyzedâ€ player rankings by scanning processedPlayers/players/concluded for the past 90 days.
â€“ GET /api/admin/system â€“ Surfaces real-time operational metrics: Firestore read/write latencies, GC % (via Stackdriver), CPU % & memory (via Cloud Run metadata), and custom uptime checks.
â€¢ Error handling: All admin endpoints wrap Firestore/CPU calls in try/except; return { "status": "error", "message": ... } with HTTP 4xx/5xx codes on failure.
â€¢ Cron integration: Exposes check_games_handler(request) (wrapped by main.check_games_handler) for Cloud Scheduler to poll game statuses and settle picks.
â€¢ When run as a script (python app.py), enables app.run(debug=True, port=5000); production runs under Gunicorn (app:app).
	backtester.py
	Historical profitâ€‘andâ€‘loss simulator
	â€¢ Scans prior processedPlayers/* docs, applies a simple betâ€‘settlement rule, and builds a P&L Series.â€¢ Useful for validating the model or generating performance charts in notebooks.
	chatgpt_bet_explainer.py
	Naturalâ€‘language â€œWhy this bet?â€ generator
	â€¢ Crafts a prompt with player stats + probabilities, calls the OpenAI ChatGPT API, and returns a concise explanation.â€¢ Cached in Firestore so each pick is explained only once.
	injury_report.py
	Live injuryâ€‘status scraper
	â€¢ Now supports both the original JSON/RSS feed and the NBAâ€™s official PDF injury report via get_full_injury_report(), using pdfplumber to parse tables into clean JSON.
â€¢ Introduces two helper functions:
â€“ get_full_injury_report() â€“ downloads the latest PDF (accounts for Eastern-Time release windows), extracts columns (team, player, status, reason), normalizes â€œLastname, Firstnameâ€ â†’ â€œFirstname Lastname,â€ and returns an array of { gameDate, gameTime, team, player, status, reason } entries.
â€“ get_player_status(name) â€“ quick lookup that scans the latest PDF data, returning { status, reason } or "NOT YET SUBMITTED" if no entry exists.
â€¢ Preserves the original JSON/RSS fallback for speed but now prioritizes the PDF parser for complete, authoritative reports.
â€¢ Returns a mapping keyed by NBA player ID so player_analyzer.py can apply up-to-the-minute injury status to adjust probabilistic forecasts.
	

	

	

	monte_carlo.py
	Python wrapper around native Monteâ€‘Carlo engine
	â€¢ Fetches â‰¤â€¯60 recent games â†’ computes Î¼,â€¯Ïƒ â†’ runs 100â€¯000 sims.â€¢ Prefers the ultraâ€‘fast shared libâ€¯libmontecarlo.so (see below) but can fall back to NumPy.
	player_analyzer.py
	Master data wrangler & feature builder
	â€¢ Data ingestion updates:
â€“ Now retrieves Play-by-Play injury annotations by calling the enhanced injury_report.get_player_status() (PDF lookup) in addition to the JSON feed fallback.
â€“ Adds a new helper fetch_additional_games(player_id, count) that paginates through the NBA API in slices of 25 games to support infinite scrolling.
â€¢ Feature expansion:
â€“ Fetches advanced metrics (effective_fg_pct, 3P_share, FT_rate) for each player via the nba_api and surfaces them in an advancedMetrics sub-map.
â€“ Computes season vs. opponent splits, home/away splits, playoff-specific statistics, and stores all of the above under clearly named keys (seasonSplit, homeAwaySplit, playoffStats).
â€¢ Probability pipeline:
â€“ Calls prediction_analyzer.poisson_over_prob(...) as before but now passes the currentInjuryStatus from injury_report.get_player_status(player_name) to slightly adjust the lambda estimate downward (via an â€œinjury adjustment factorâ€) before computing Poisson P (â‰¥ threshold).
â€“ For Monte Carlo, still attempts the OCaml stub first; now caches Î¼ / Ïƒ in-memory for each session to avoid re-computing if the same player is analyzed multiple times within 5 minutes.
â€¢ Volatility forecasting:
â€“ Uses volatility.forecast_volatility() for the last 50 regular-season games and volatility.forecast_offer_volatility() for playoffs; merges results under volatility.regular and volatility.playoffs.
â€¢ ChatGPT explanation:
â€“ Bundles all collected stats into a single analysisPayload and passes to chatgpt_bet_explainer.generate_explanation(analysisPayload), which now returns both "short_explanation" (for card snippets) and "long_explanation" (for deep dives).
â€¢ Designed so that any missing sub-field (e.g., no playoff data yet) gracefully defaults to an empty array or null so the front-end doesnâ€™t break.
â€¢ Emits debug logs when run locally (DEBUG=true), but silences verbose NBA API chatter in production.
	prediction_analyzer.py
	Math helpers (Poisson & misc.)
	â€¢ Implements closedâ€‘form Poisson â€œâ‰¥â€¯thresholdâ€ calculation.â€¢ Provides thin wrappers invoked by player_analyzer and feeds into chatgpt_bet_explainer.
	volatility.py
	GARCH(1,1) volatility forecaster
	â€¢ Builds a 50â€‘game (or playoffâ€‘only) series of point â€œreturnsâ€, fits arch_model, and returns 1â€‘stepâ€‘ahead Ïƒ.â€¢ Output stored as volatilityForecast / volatilityPlayOffsForecast.
	screenshot_parser.py
	OCR extractor
	â€¢ Accepts baseâ€‘64 images, calls OpenAI Vision, parses player / threshold pairs, and returns them to app.py.
	requirements.txt
	Python dependency list
	â€¢ Flask, nba_api, arch, firebaseâ€‘admin, openai, etc.â€”installed in Stageâ€¯2 of the Docker build.
	mc_stub.c & montecarlo.ml
	Native speed layer for Monteâ€‘Carlo
	â€¢ montecarlo.ml â†’ OCaml routine that performs the random draws.â€¢ mc_stub.c bridges Python â†” OCaml via ctypes, producing libmontecarlo.so during the Docker build.
	Dockerfile
	Twoâ€‘stage container build
	Stageâ€¯1 (OCaml):  1. Starts from ocaml/opam, installs OCaml + ctypes.  2. Compiles montecarlo.ml into a PIC object, compiles mc_stub.c, links both into libmontecarlo.so.
Stageâ€¯2 (Python runtime):  1. python:3.9â€‘slim, installs libffi and Python deps from requirements.txt.  2. Copies the compiled .so and all backâ€‘end source files.  3. Launches Gunicorn (CMD gunicorn app:app --bind 0.0.0.0:${PORT:-8080} â€¦).
	frontEnd/


File
	Purpose in one glance
	Key responsibilities / notable details
	tailwind.config.js
	Designâ€‘system config for Tailwindâ€¯CSS
	â€¢ Specifies content scan globs (index.html, all files under src/) so unused classes are purged from production builds.â€¢ Extends the default theme with custom breakpoints (xsâ€¯475â€¯px to 2xlâ€¯1536â€¯px), extra spacing steps (18,â€¯88,â€¯128), a granular fontâ€‘scale (xsâ€¯â†’â€¯4xl), and utilities like minHeight.touch (44â€¯px iOS tap target) and maxWidth.mobile (100â€¯vw).â€¢ Adds reusable animations & keyframes â€“ slideâ€‘in/out, fadeâ€‘in/out, spin, pulse â€“ referenced by class names such as animate-slide-in-right.â€¢ No additional plugins loaded; relies solely on Tailwind core.
	frontEnd/public/
File
	Purpose in one glance
	Key details
	mobile-viewport.html
	Mini HTML shim that forces mobileâ€‘friendly scaling and blocks pinch/doubleâ€‘tap zoom
	â€¢ Declares a restrictive <meta name="viewport" â€¦> so the SPA renders at 100â€¯% width on phones.â€¢ Inline IIFE listens for touchstart (multiâ€‘touch) and touchend events to preventDefault()â€”stopping iOS pinchâ€‘zoom and the 300â€¯ms doubleâ€‘tap zoom gesture.â€¢ Contains no UI markup; it simply injects these behaviors before the React bundle mounts.
	frontEnd/src/
File
	Purpose in one glance
	Key responsibilities / notable details
	App.css
	Global styling + mobileâ€‘first overrides
	â€¢ Sets the global shell: #root maxâ€‘widthâ€¯1280â€¯px, centered with zero padding, leftâ€‘aligned text.â€¢ Keeps Vite starter styles: logo hover/ spin animation, .card padding, .read-the-docs gray text.â€¢ Removes the previously bloated mobile overridesâ€”Tailwind utility classes in the new components now handle responsiveness.â€¢ Adds a slim mobileâ€‘only block (max-width:â€¯768px) that just enforces 44â€¯px minimum touch targets and font-size:â€¯16px on form controls to prevent iOS zoom.
	App.jsx
	Topâ€‘level React router
	â€¢ Uses React Routerâ€¯v6 to declare the full routing map:
/â€¯â†’â€¯SignIn, /dashboardâ€¯â†’â€¯DashboardPage, /processed-playersâ€¯â†’â€¯ProcessedPlayersPage, /previous-betsâ€¯â†’â€¯PreviousBetsPage, /alertsâ€¯â†’â€¯AlertsPage.â€¢ Includes a legacy redirect by pointing /HomePage to DashboardPage, preserving old bookmarks.â€¢ Stateless functional wrapper; exported as default so main.jsx can mount it at the root. 
	firebase.js
	Frontâ€‘end Firebase initializer
	â€¢ Reads API keys & IDs from Vite env variables and calls initializeApp().â€¢ Exports Firestore instance db and, in browser environments only, analyticsâ€”guarded so SSR or Node tests donâ€™t break.
	index.css
	Tailwind layer injection
	â€¢ Simply imports @tailwind base, components, and utilities; actual custom styles live in individual component .css files.
	main.jsx
	React entry point rendered by Vite
	â€¢ Boots the app via createRoot().render(<StrictMode><App /></StrictMode>).â€¢ Pulls in index.css so Tailwind styles apply globally before any component mounts.
	

frontEnd/src/pages
File
	Purpose in one glance
	Key responsibilitiesâ€¯/â€¯notable elements
	DashboardPage.jsx
	Main dashboard SPA (picksâ€¯+â€¯searchâ€¯+â€¯upload)
	â€¢ Still wrapped in AppLayout so header/nav/banners stay global.â€¢ Data bootâ€‘strap: on mount it â‘  fetches profile, picks, activeâ€‘bets & history, â‘¡ autoâ€‘migrates completed bets to history, â‘¢ hydrates state in one async flow with granular error handling.â€¢ Picks workflow  â€“ Lists saved picks in a responsive card grid (photo, team logos, OVER/UNDER chip, progress bar).  â€“ Adds picks from PlayerAnalysisDashboard or the Processed Players page via addUserPick(); deâ€‘dupes and enforces â‰¤â€¯6 picks.  â€“ Removes with Trash icon (removeUserPick()), shows loading skeleton while first fetch resolves.â€¢ Search & analysis: embeds PlayerAnalysisSearch âœ /api/player âœ PlayerAnalysisDashboard for instant deepâ€‘dive + Add to Picks CTA.â€¢ Screenshot pipeline: ScreenshotUploader parses PrizePicks cards then routes to Processed Players on success.â€¢ Betting flow  â€“ Lockâ€¯Inâ€¯Picks button enabled when â‰¥â€¯2 picks â†’ opens BetSlip.  â€“ On confirm it validates, normalises pick objects, calls createBet(), clears picks (clearUserPicks()), refreshes active bets, then shows BetConfirmation.â€¢ Active bets panel: formats live wagers for the ActiveBet accordion; supports Edit (â†’ EditBetModal), Cancel (with confirm dialog), and player click (opens PlayerStatsModal).â€¢ Modals stack handled declaratively: BetSlip, BetConfirmation, PlayerStatsModal, EditBetModal all mount/unmount via local state.â€¢ Robust error / empty states, progress indicators, and safe fallbacks (placeholder images, TBD labels) make the page resilient across legacy and new Firestore schemas.
	ProcessedPlayersPage.jsx
	Dedicated gallery of serverâ€‘processed players
	â€¢ Uses AppLayout.â€¢ Renders ProcessedPlayers, passes onAddToPicks; enforces 6â€‘pick cap; deâ€‘dupes legacy picks.â€¢ Route: /processed-players.
	PreviousBetsPage.jsx
	Bet history & active wagers center
	â€¢ Uses AppLayout.â€¢ Shows ActiveBet list (editable/cancellable) + PreviousBets accordion from Firestore history.â€¢ On mount migrates completed bets; supplies EditBetModal, PlayerStatsModal.â€¢ Route: /previous-bets.
	AlertsPage.jsx
	Notifications / alerts hub
	â€¢ Uses AppLayout.â€¢ Thin wrapper that mounts Notifications; future iterations will hydrate from userâ€‘specific subs.â€¢ Route: /alerts.
	SignIn.jsx
	Simple usernameâ€¯+â€¯password login screen
	â€¢ Stylized form with showâ€‘password toggle.â€¢ Verifies credentials via getUserByUsername; seeds new users; stores currentUser in sessionStorage.â€¢ Redirects to /dashboard on success.
	AdminLogin.jsx
	Admin portal login page
	â€¢ Gradient â€œAdmin Portalâ€ screen with Lucide icons; username + password fields with show/ hide toggle.â€¢ Calls getAdminCredentials & verifyAdminPassword (from firebaseService) to authenticate.â€¢ On success sets sessionStorage.isAdminâ€¯=â€¯true & adminUser, then navigate("/admin/dashboard").â€¢ Shows red error banner on failure & loading spinner while verifying.â€¢ Route: /admin.
	AdminDashboard.jsx
	Authâ€‘protected admin SPA (analytics + monitoring)
	â€¢ Wrapped in AdminLayout (admin header/sidebar).â€¢ On mount checks sessionStorage.isAdmin; if missing, redirects to /admin.â€¢ Tab navigation: System Overview, User Analytics, Bet Performance, Player Analytics, Financial Metrics, System Monitoring.â€¢ Dynamically renders the active tab component; polls Firestore via service helpers.â€¢ Route: /admin/dashboard.
	

frontEnd/src/components/


File
	Purpose in one glance
	Key responsibilitiesâ€¯/â€¯notable UI behavior
	PredictionCard.jsx
	Mini card that surfaces the modelâ€™s score prediction for one player
	â€¢ Shows threshold, computed probability and Poisson probability.â€¢ Colors the Recommendation banner greenâ€¯/â€¯yellowâ€¯/â€¯red based onâ€¯prediction.category (â€œAlmostâ€¯guaranteedâ€, â€œNeutralâ€, â€œRiskeyâ€).
	PreviousBets.jsx
	Accordion list of a userâ€™s completed and inâ€‘flight wagers
	â€¢ Combines Activeâ€¯Bets and Completedâ€¯Bets into one history panel with coloured section badges.
â€¢ Each bet header shows wager date, stake, win/loss chip and toggles an expandable results pane.â€¢ Expanded view renders platform/betâ€‘type meta plus a pick grid that colourâ€‘codes HIT vs MISS and shows actual points.â€¢ Uses local expandedBets state to remember which cards are open.
	processed-players.cssâ€¯(updated)
	Hover, touch & animation helpers for ProcessedPlayers grid
	â€¢ Scales card toâ€¯1.02â€¯Ã— on hover, 0.98â€¯Ã— on touchâ€‘press; adds deeper shadow.â€¢ Reâ€‘usable .pulse keyâ€‘frame (green glow) for â€œAdded to Picksâ€â€‘style confirmations.â€¢ Mobile tweaks: bigger touch targets (minâ€‘height:â€¯400â€¯px), tighter grid gaps, larger font, and button sizing.â€¢ Utility spin & fadeâ€‘in keyâ€‘frames used by loading spinners / card entrance.
	ProcessedPlayers.jsxâ€¯(updated)
	Searchable / filterable gallery of players already analyzed serverâ€‘side
	â€¢ Fetches docs viaâ€¯getProcessedPlayers() â†’ builds team and AIâ€‘recommendation dropâ€‘downs (100â€¯%â€¯YES / 90â€“100â€¯%â€¯YES / 80â€“90â€¯%â€¯possible).â€¢ Mobileâ€‘first card redesign with gradient headers, team/opponent logos, and threshold/probability panels.â€¢ â€œAdd to Picksâ€ confirmation âœ… now pulses forâ€¯3â€¯s; perâ€‘player added state stored inâ€¯addedPlayersâ€¯map.â€¢ Handles loading spinner, graceful error banner, emptyâ€‘state, and responsive grid (1â€¯Ã—â€¯â†’â€¯3â€¯Ã—).â€¢ Clicking a card opens PlayerAnalysisModal.
	RecommendationCard.jsx
	Lightweight â€œquick verdictâ€ box used inside the analysis modal
	â€¢ Derives OVER/UNDER & confidence (Highâ€¯/â€¯Medium) from basic averages vsâ€¯threshold.â€¢ Shows Poisson probability and iconâ€‘based sentiment (ğŸ¡…â€¯greenâ€¯/â€¯ğŸ¡‡â€¯red).
	ScreenshotUploader.jsx
	Dragâ€‘andâ€‘drop widget that parses PrizePicks images, then chains player analysis
	â€¢ Supports multiâ€‘file dragâ€‘andâ€‘drop and clickâ€‘toâ€‘browse; shows image previews with type & size badges and perâ€‘file remove/X.â€¢ Simulates progress toâ€¯95â€¯%, callsâ€¯/api/parse_screenshot, then sequentiallyâ€¯POSTs each parsedâ€¯{player,â€¯threshold}â€¯toâ€¯/api/player while updating rowâ€‘status chips (spinnerâ€¯â†’â€¯âœ…/âŒ).â€¢ Handles error banners, success banners, Clear All, and clears previews after processing.
	StatsCard.jsx
	Detailed stat panel inside the analysis modal
	â€¢ Displays season avg, lastâ€‘5 avg, vsâ€‘opponent avg, home/away avg.â€¢ Inline table of lastâ€‘5 games, colorâ€‘coded vsâ€¯threshold.â€¢ â€œSeeâ€¯Moreâ€ opens paginated modal of up toâ€¯15â€¯games.
	thinking-animation.css
	Reâ€‘usable pulse animation for ChatGPT â€œthinkingâ€ loader
	â€¢ .thinking-dot staggered dot pulse and .thinking-ring breathing ring keyâ€‘frames.
	ThinkingAnimation.jsx
	Centered loader component while awaiting AI response
	â€¢ Uses the above CSS to render a gradient ring, three pulsing dots, and explanatory blurb (â€œGathering player statisticsâ€¦â€).
	TrendingPicks.jsx
	Static demo card of â€œmost popular picksâ€
	â€¢ Currently hardâ€‘codes an array of three players with popularityâ€¯%, threshold and recommendation; renders with icons & team info.
	FavoritePlayers.jsx
	Emptyâ€‘state panel for future â€œstarredâ€ players
	â€¢ Renders a grid of favoriteâ€‘player tiles once data exists; for now shows a big prompt and â€œAdd Playersâ€ CTA button.
	ImageWithFallback.jsx
	Reâ€‘usable <img> wrapper that never breaks
	â€¢ Attempts primaryâ€¯src; onâ€¯onError swaps toâ€¯fallbackSrc (orâ€¯/placeholder.svg) so broken images donâ€™t wreck the layout.
	InjuryStatusCard.jsx
	Rich card that visualizes a playerâ€™s latest injury report
	â€¢ Three states: no data, found on report, healthy.â€¢ Maps status â†’ color (redâ€¯=â€¯Out, yellowâ€¯=â€¯Questionable, greenâ€¯=â€¯Probable/Available).â€¢ Shows reason, game date/time, and matchup when available.
	MonteCarloCard.jsx
	Explains the Monteâ€‘Carlo simulation result for a threshold
	â€¢ Displays probability (greenâ€¯/â€¯yellowâ€¯/â€¯red), distribution type, and an info blurb with a chart icon.â€¢ Parses string or numeric inputs and formats toâ€¯##.##â€¯%.
	Notifications.jsx
	Placeholder settings panel for future alerts
	â€¢ Static copy describing upcoming features (gameâ€‘start, performance, result alerts).â€¢ Disabled toggle switches communicate â€œcoming soon.â€
	PlayerAnalysisDashboard.jsx
	Inâ€‘page deepâ€‘dive dashboard shown after a search
	â€¢ Hero banner with photo, logos, matchup info, AI recommendation chip, threshold, Poisson & Monteâ€‘Carloâ€¯%â€¯s.â€¢ Keyâ€‘stats tiles, volatility tiles, playoff tiles.â€¢ Expandable sections for allâ€‘season encounters, recent games, playoff log; â€œLoad more gamesâ€ fetches viaâ€¯/api/player/{id}/more_games.
	PlayerAnalysisModal.jsxâ€¯(updated)
	Fullâ€‘screen modal deepâ€‘dive (mobileâ€‘first)
	â€¢ Gradient hero with photo, dualâ€‘logo overlay, threshold & AI recommendation chip.â€¢ Keyâ€‘stats grid, volatility tiles (regular & playoffs), and mobileâ€‘optimized expandable sections (allâ€‘season encounters, moreâ€‘games fetch).â€¢ Displays Poisson & Monteâ€‘Carloâ€¯%â€¯s, advanced metrics, injury report snippet, plus freeâ€‘text AI bet explanation.â€¢ â€œAdd to Picksâ€ button closes modal and returns enriched pick object with deterministicâ€¯id.
	PlayerAnalysisSearch.jsx
	Smart search bar that drives the analysis flow
	â€¢ Autocomplete form with recentâ€‘search dropâ€‘down (localStorage), searchâ€‘tips panel, and live validation.â€¢ Saves topâ€¯5â€¯searches; emitsâ€¯onSearch(player, threshold); parent supplies loadingâ€¯/â€¯error props.
	PlayerCard.jsx
	Simple summary card for list views
	â€¢ Shows photo, team/opponent logos, ranks, nextâ€‘game infoâ€”used in processed players & search suggestions.
	PlayerStatsModal.jsx
	Lightweight modal for viewing bet details from Previous Bets
	â€¢ Hydrates from Firestore when possible for richer stats; falls back to passed prop.â€¢ Presents threshold, recommendation, timings, season / lastâ€‘5 / vsâ€‘opponent averages and actual result.
	AdvancedMetricsCard.jsx
	Shows eFGâ€¯%, 3â€‘pt share, FTâ€‘rate & splits
	â€¢ Renders advancedâ€‘metrics grid plus careerâ€‘season table.â€¢ Includes an info callâ€‘out explaining each stat.
	ApiTest.jsx
	Connectivity checker for the Flask API
	â€¢ Callsâ€¯testAPI() on mount, shows ChatGptThinking loader until response, then prints success or error with a Retry button.
	BetConfirmation.jsx
	Postâ€‘submission modal summarizing a locked bet
	â€¢ Gradient header with âœ… icon; lists platform (logoâ€‘aware), bet amount, potential winnings and computed Totalâ€¯Payout.â€¢ Scrollable pick list shows threshold & recommendation chips, plus success tick.â€¢ Done button dismisses modal.
	BetExplanationCard.jsx
	AI narrative block (â€œWhy this bet?â€)
	â€¢ Chooses up/down/warning icon & colors from recommendation, shows ChatGPT text plus Poisson & Monteâ€‘Carloâ€¯%â€¯s, with fallback No Recommendation state.
	BetSlip.jsx
	Fullâ€‘screen wizard to assemble & confirm a wager
	â€¢ Inputs for Betâ€¯Amount and Potentialâ€¯Winnings; live validation disables Confirm until both >â€¯0.
â€¢ Platform selector supports PrizePicks, Underdog or custom â€œOtherâ€ with conditional betâ€‘type buttons.â€¢ Tap a pick card to toggle inclusion; selected picks highlighted.â€¢ On confirm â†’ passes amount, winnings, selected IDs, platform & betâ€‘type to parent. 
	chatgpt-thinking.css
	Dotâ€‘pulse & logoâ€‘glow animation for loaders
	â€¢ Defines .chatgpt-thinking-dot keyâ€‘frames and .logo-pulse halo.
	ChatGptThinking.jsx
	Loader component that uses the above CSS
	â€¢ Shows ChatGPT logo + three pulsing dots and optional status text.
	DailyPicks.jsx
	â€œTodayâ€™s picksâ€ & performanceâ€‘tracker panel
	â€¢ Emptyâ€‘state callâ€‘out if no picks.
â€¢ Otherwise renders player row with date/time icons, threshold + recommendation chip and â€œLockedâ€¯Inâ€ badge.â€¢ Footer Performance Tracker summarises pick count, hardâ€‘coded winnings & stake placeholders.
	EditBetModal.jsx
	Modal to tweak an existing bet before settlement
	â€¢ Lets user change amount, platform, bet type & which picks are included; recalculates winnings; validates at least one pick selected.
	AppLayout.jsx
	Shared topâ€‘level layout wrapping all main pages
	â€¢ Desktop header with nav links; mobile header + slideâ€‘in menu using Lucide icons and mobileMenuOpen state.â€¢ Highlights active route via useLocation(), displays â€œPlay at your own riskâ€ banner + cumulativeâ€‘earnings banner.â€¢ Fetches user profile (avatar, display name, earnings) on mount; handles signâ€‘out and authâ€‘guard redirection.
	MobileLayout.jsxâ€¯(updated)
	Responsive shell that swaps between a desktop sidebar and a collapsible mobile drawer
	â€¢ Navigation buttons now use React Routerâ€™sâ€¯navigate() instead of local state.â€¢ Sticky mobile header with hamburger/close icon toggles drawer; desktop sidebar fixedâ€¯64â€¯px wide.â€¢ Wraps {children} so any page can inherit the layoutâ€”and delegates global banners & auth guard to AppLayout.
	MobileOptimizedDashboard.jsx
	Allâ€‘inâ€‘one mobile dashboard workflow (pick list â†’ search â†’ stats)
	â€¢ Shows Your Picks panel with lockâ€‘in, remove and live count (picks.lengthâ€¯/â€¯6).â€¢ Responsive analysis form and â€œAnalyzeâ€ button.â€¢ Renders PlayerCard, StatsCard, RecommendationCard, lastâ€‘5 games table, and Add to Picks CTA after a search.
	MobilePlayerCard.jsx
	Compact playerâ€‘info tile for small screens
	â€¢ Displays photo (with fallback), name, team, position, team/opponent playoff ranks, and nextâ€‘game info.â€¢ Fully responsive flex layout that stacks on narrow widths.
	ActiveBet.jsx
	Expandable card summarizing an inâ€‘progress wager
	â€¢ Trophy icon with pulsing alert dot; Edit / Cancel action buttons.â€¢ Expanded panel splits Betâ€¯Details and Yourâ€¯Picks; pick rows are clickable and statusâ€‘coloured (Finalâ€¯/â€¯Liveâ€¯/â€¯Scheduled).
	

frontEnd/src/components/admin/


File
	Purpose in one glance
	Key responsibilitiesâ€¯/â€¯notable UI behavior
	SystemOverview.jsx
	Snapshot of overall platform health
	â€¢ Fetches system KPIs via getSystemOverview() everyâ€¯30â€¯s.â€¢ Stats grid (users, bets, processed players, winnings, uptime, API, errorâ€‘rate, response time).â€¢ Recent activity feed & quickâ€‘action buttons (manage users, DB backup, alerts).
	UserAnalytics.jsx
	Insights into user engagement & behavior
	â€¢ Timeâ€‘range selector (24h,â€¯7d,â€¯30d,â€¯90d) â†’ getUserAnalytics().â€¢ Metrics tiles (active users, avg session, top performer, new signâ€‘ups).â€¢ Recentâ€‘activity table & engagement bar chart.
	BetPerformance.jsx
	Platformâ€‘wide bet outcome analytics
	â€¢ Timeâ€‘range selector; fetches via getBetPerformance().â€¢ Metrics tiles (total bets, winâ€‘rate, winnings, ROI), win/loss distro bars, mostâ€‘profitable picks list, 30â€‘day performance trend chart.
	PlayerAnalytics.jsx
	Aggregate view of playerâ€‘level stats
	â€¢ Fetches via getPlayerAnalytics(); sort dropdown (hitâ€‘rate, analyzed, profit, popularity).â€¢ Metrics tiles, sortable ranking table, threshold distribution & teamâ€‘frequency charts.
	FinancialMetrics.jsx
	Revenue and financial health dashboard
	â€¢ Timeâ€‘range selector; fetches via getFinancialMetrics().â€¢ Metrics tiles (revenue, user winnings, platform ROI, avg bet size), revenue breakdown bars, topâ€‘earning users list, revenue trend chart.
	SystemMonitoring.jsx
	Live operational monitoring panel
	â€¢ Polls getSystemHealth() everyâ€¯10â€¯s.â€¢ Metrics grid (API response, DB perf, CPU/memory, latency, error rate) colored by status.â€¢ System alerts feed, 24â€¯h charts for response time & error rate, serviceâ€‘status grid with uptime dots.
	

frontEnd/src/scripts/


File
	Purpose in one glance
	Key responsibilities / notable elements
	mobile-viewport.js
	Forces proper mobile scaling when the main app is loaded from /public/mobile-viewport.html
	â€¢ Immediatelyâ€‘invoked function checks whether a <meta name="viewport"> already exists; if not, it injects one with initialâ€‘scale=1, maximumâ€‘scale=1, and userâ€‘scalable=no to lock the zoom level.
	use-mobile-detector.js
	Lightweight React hook to tell components â€œare we on a phone?â€
	â€¢ Keeps an isMobile state that is true when window.innerWidth <â€¯768â€¯px.â€¢ Listens for resize events so the flag updates dynamically if the user rotates or resizes the window.
	initDatabase.js
	Oneâ€‘time Firestore seeder for local/dev demos
	â€¢ When executed, creates a demo user bryanram (with a basic profile), admin siteâ€‘wide stats, and an admin user list document if they donâ€™t already exist.â€¢ Uses serverTimestamp() so created/lastâ€‘login times are serverâ€‘authoritative.
	migrateData.js
	Script to reorganize legacy user docs into the new schema
	â€¢ Reads the old flat user document, rolls username/password/email into a nested profile object, and writes it back via updateDoc.â€¢ Splits historic bets array into activeBets and monthâ€‘bucketed betHistory subâ€‘collections, transforming each bet to the new field names along the way.
	frontEnd/src/services/


File
	Purpose in one glance
	Key responsibilities / notable elements
	api.js
	Thin wrapper around your Flask backâ€‘end
	â€¢ Single exported helper analyzePlayer(playerName,â€¯threshold) that POSTs to /api/player. â€¢ Cleans / typeâ€‘casts the threshold, maps legacy field names (nba_player_idâ€¯â†’â€¯playerId, etc.) and inserts fallâ€‘back images so the UI never breaks. â€¢ Ensures dates are ISOâ€‘formatted and provides default â€œUnknown Team/Opponentâ€ strings when the backâ€‘end response is incomplete.
	firebaseService.js
	Firestore dataâ€‘access layer
	â€¢ One unified Firestore gateway â€“ every read/write to users, picks, bets, processedPlayers, and admin collections goes through this file, so the rest of the React app never touches the raw Firestore SDK.â€¢ Documentâ€‘reference first design
- createPlayerDocumentReference, resolveDocumentReference, and the new batch helper resolveDocumentReferences let the UI store a lightweight pointer (DocumentReference) inâ€¯users.picks or activeBets and expand it to a full object only when rendering.
- Twoâ€‘way helpers automatically fall back to legacy â€œfullâ€‘objectâ€ arrays so nothing breaks for older users.
â€¢ Robust data normalisation
- transformPicksData converts whatever shape comes back (legacy, reference, mixed) into a consistent card object with sensible defaults (placeholder images, TBD times, etc.).
- All bet helpers (getActiveBets, getBetHistory, etc.) pipe their pick arrays through the same normaliser so every component can assume the same keys.
â€¢ Full CRUD for user picks & bets â€“ with pathâ€‘safe updates
- addUserPick, removeUserPick, createBet, updateActiveBet, cancelActiveBet now compare document paths to avoid duplicate refs and guarantee that cancelling a bet never creates history records.
- Migrations (migrateUserPicksToReferences, migrateActiveBetsToReferences, migrateBetHistoryToReferences, migrateUserToReferences) batchâ€‘convert whole accounts to the reference model in one call.
â€¢ User bootstrap + profile management
- initializeUser / initializeDatabase seed profile objects and dailyâ€‘picks docs on first signâ€‘in, or silently migrate flatâ€‘field users.
- verifyUserPassword, updateUserProfile, updateUserStats work with both the new nested profile schema and the old topâ€‘level fields.
â€¢ Admin analytics & health endpoints
- Credential utilities (getAdminCredentials, verifyAdminPassword) plus Firestore aggregators (getSystemOverview, getUserAnalytics, getBetPerformance, getPlayerAnalytics, getFinancialMetrics, getSystemHealth) feed the React admin dashboard; most metrics are live counts, with a handful of placeholders flagged for future monitoring hooks.
â€¢ Safety & migration helpers everywhere â€“ extensive console logging, try/catch guards, and ID fallbacks mean bad data canâ€™t crash the UI, while batch writes (writeBatch) keep large migrations atomic.


	injury_report_fn/


File
	Purpose in one glance
	Key responsibilities / notable elements
	full_injury_report.py
	Deep PDF scraper that converts the NBAâ€™s official dailyâ€‘injury PDF into clean JSON
	â€¢ Reâ€‘creates the NBAâ€™s PDF URL based on the most recent â€œeasternâ€‘timeâ€ release window (reports drop 12â€¯p.m./5â€¯p.m./8â€¯p.m. ET). â€¢ Downloads the PDF, opens it with pdfplumber, and uses explicit xâ€‘coordinates to pull a columnâ€‘perfect table. â€¢ Normalizes team names, splits camelâ€‘cased headings, swaps â€œLastname,â€¯Firstnameâ€ â†’ â€œFirstname Lastname,â€ and strips lineâ€‘breaks from the Reason column. â€¢ Exposes two helpers:   â€¢ get_full_injury_report() â†’ listâ€¯âŠ‚â€¯{gameDate,â€¯gameTime,â€¯team,â€¯player,â€¯status,â€¯reason} for every entry.   â€¢ get_player_status(name) â†’ quick lookup returning {status, reason} (or "NOT YET SUBMITTED" if a team hasnâ€™t filed).
	main.py
	Cloudâ€‘Function handler that keeps Firestore documents in sync with realâ€‘time game status
	â€¢ Utility fetch_game_status() hits nba_apiâ€™s ScoreboardV2 & BoxScoreTraditionalV2 to see whether a game has started, is live, or has finishedâ€”and, if finished, grabs the playerâ€™s final points. â€¢ check_active_players() walks the processedPlayers/players/active collection; if fetch_game_status() returns new info, it calls update_doc() to patch the Firestore doc (e.g., set "gameStatus": "Concluded" and "finalPoints": n). â€¢ Stubs for check_user_picks() and check_active_bets() illustrate the same pattern for user bet docs. â€¢ check_games_handler(request) is the HTTP entryâ€‘point wired to Cloud Scheduler (runs every hour); it invokes check_active_players() and responds 200 OK or 500 on error.